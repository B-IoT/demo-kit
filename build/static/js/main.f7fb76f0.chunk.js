(this["webpackJsonpbiot-web-app"]=this["webpackJsonpbiot-web-app"]||[]).push([[0],{580:function(e,t,a){},820:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(16),l=a.n(i),o=(a(580),a(856)),c=a(548),s=a(87),d=a(82),m=a(144),u=a(348),b=a(854),p=a(145),g=a(356),f=a.n(g),v=a(355),h=a.n(v),E=a(107),y=a(55),I=a(62),w=a(28),j=a(3),R=a(117),O=a(858),x=a(18),T=a(71),C=a(833),S=a(849),B=a(349),k=a(519),D=a.n(k),N=a(520),L=a.n(N),M=a(829),A=a(847),P=a(431),q=a(521),G=a.n(q),F=a(522),W=a.n(F),Z=a(523),z=a.n(Z),H=240,J=function(e){return{body:{noMatch:e,toolTip:"Trier",columnHeaderTooltip:function(e){return"Trier par ".concat(e.label)}},pagination:{next:"Page suivante",previous:"Page pr\xe9c\xe9dente",rowsPerPage:"Lignes par page:",displayRows:"/"},toolbar:{search:"Rechercher",downloadCsv:"T\xe9l\xe9charger CSV",print:"Imprimer",viewColumns:"Afficher les colonnes",filterTable:"Filtrer le tableau"},filter:{all:"Tous",title:"FILTRES",reset:"R\xc9INITIALISER"},viewColumns:{title:"Afficher les colonnes",titleAria:"Afficher/Cacher les colonnes"},selectedRows:{text:"ligne(s) selection\xe9e(s)",delete:"\xc9liminer",deleteAria:"\xc9liminer la ligne choisie"}}},K=Object(u.a)((function(e){return{drawer:{width:H,flexShrink:0},drawerPaper:{width:H},drawerHeader:Object(I.a)(Object(I.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"})}}));function Y(e){var t=e.name,a=e.icon,n=e.to,i=r.a.useMemo((function(){return r.a.forwardRef((function(e,t){return r.a.createElement(d.b,Object.assign({to:n,ref:t},e))}))}),[n]);return r.a.createElement(M.a,{button:!0,key:t,component:i},r.a.createElement(A.a,null,a),r.a.createElement(P.a,{primary:t}))}function Q(e){var t=e.isOpen,a=e.handleDrawerClose,n=K(),i=Object(x.a)();return r.a.createElement(T.a,{className:n.drawer,variant:"persistent",anchor:"left",open:t,classes:{paper:n.drawerPaper}},r.a.createElement("div",{className:n.drawerHeader},r.a.createElement(B.a,{onClick:a},"ltr"===i.direction?r.a.createElement(D.a,null):r.a.createElement(L.a,null))),r.a.createElement(S.a,null),r.a.createElement(C.a,null,r.a.createElement(Y,{name:"Accueil",to:"/",icon:r.a.createElement(G.a,null)}),r.a.createElement(Y,{name:"Localisation",to:"/items",icon:r.a.createElement(W.a,null)}),r.a.createElement(Y,{name:"Maintenance",to:"/maintenance",icon:r.a.createElement(z.a,null)})))}var U=a(850),V=a(432),X=a(524),$=a.n(X),_=Object(u.a)((function(e){return{menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},hide:{display:"none"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(H,"px)"),marginLeft:H,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})}}}));function ee(e){var t=e.isMenuDrawerOpen,a=e.onMenuButtonClick,n=_();return r.a.createElement(U.a,{position:"fixed",className:Object(j.default)(n.appBar,Object(E.a)({},n.appBarShift,t))},r.a.createElement(V.a,null,r.a.createElement(B.a,{edge:"start",className:Object(j.default)(n.menuButton,t&&n.hide),color:"inherit",onClick:a,"aria-label":"open drawer"},r.a.createElement($.a,null)),r.a.createElement(R.a,{variant:"h6",noWrap:!0,className:n.title},"BIoT")))}var te=a(549),ae=a(449),ne=a(857),re=a(89),ie=a.n(re),le=a(171),oe=a(525),ce=a.n(oe).a.create({baseURL:"http://127.0.0.1:8000"});function se(){return de.apply(this,arguments)}function de(){return(de=Object(le.a)(ie.a.mark((function e(){var t,a;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.get("/items");case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(){return(me=Object(le.a)(ie.a.mark((function e(t){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.post("/items",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ue=a(851),be=a(852);function pe(e){return r.a.createElement(ue.a,{className:e.className,style:e.style},r.a.createElement(be.a,null,e.children))}var ge=a(90),fe=Object(u.a)((function(e){return{popupTitle:{fontWeight:400,fontSize:10,padding:"2px"}}}));function ve(e){var t=e.item,a=fe();return r.a.createElement(R.a,{className:a.popupTitle},t.type," ",t.id)}function he(e){var t,a=e.items,n=e.index,i=Object(x.a)(),l=Object(ge.e)({accessToken:"pk.eyJ1IjoiZ29uZG9sYXYiLCJhIjoiY2tnM2oxZWd4MGFqYTJ3bDZiZ2Zhcmt6ayJ9.wtTO9AblipI3G20FMELcxQ",minZoom:8});if(-1!==n){var o=a[n];t=r.a.createElement(ge.c,{coordinates:[o.longitude,o.latitude]},r.a.createElement(ve,{item:o,style:{borderRadius:i.borderRadius}}))}return r.a.createElement(l,{style:"mapbox://styles/gondolav/ckg3j2q4h1qg019k8sdyhkvvy",containerStyle:{width:"40vw",height:"78vh"},center:[6.891924,46.440896],zoom:[18]},r.a.createElement(ge.b,{type:"symbol",id:"items",layout:{"icon-image":"marker-15","icon-allow-overlap":!0}},a.map((function(e){return r.a.createElement(ge.a,{key:e.id,coordinates:[e.longitude,e.latitude]})}))),t,r.a.createElement(ge.d,null))}var Ee=a(262),ye=a.n(Ee),Ie=Object(u.a)((function(e){return{table:{borderRadius:e.borderRadius,height:"78vh"},selectedRow:{borderLeftStyle:"solid",borderLeftColor:e.palette.primary.main}}}));function we(e){var t=e.items,a=e.onItemClick,i=e.searchText,l=e.defaultItemClickedId,o=Ie(),c=Object(n.useState)(l),s=Object(y.a)(c,2),d=s[0],u=s[1],p={filterType:"checkbox",elevation:1,rowsPerPage:20,rowsPerPageOptions:[5,10,20,40],selectableRows:"none",selectableRowsHeader:!1,searchText:i,onRowClick:function(e,t){var n=t.dataIndex;t.rowIndex;a(n),u(e[0])},setRowProps:function(e,t,a){return{className:Object(j.default)(Object(E.a)({},o.selectedRow,e[0]===d))}},textLabels:J("D\xe9sol\xe9, aucun objet correspondant trouv\xe9")};return r.a.createElement(b.a,{theme:Object(m.a)({overrides:{MUIDataTableToolbar:{titleText:{fontWeight:"bold"}}}})},r.a.createElement(ye.a,{className:o.table,title:"Objets",data:t,columns:[{name:"id",label:"Id",options:{filter:!1,sort:!0}},{name:"type",label:"Cat\xe9gorie",options:{filter:!0,sort:!0}},{name:"service",label:"Service",options:{filter:!0,sort:!0}},{name:"battery",label:"Batterie",options:{filter:!1,sort:!0}},{name:"status",label:"Status",options:{filter:!0,sort:!0}},{name:"latitude",label:"Latitude",options:{filter:!1,sort:!0,display:!1}},{name:"longitude",label:"Longitude",options:{filter:!1,sort:!0,display:!1}}],options:p}))}var je=a(91),Re=a.n(je);var Oe={available:"Disponible",unavailable:"Indisponible",needMaintenance:"\xc0 r\xe9parer"};function xe(e){return e.map((function(e){return Object(I.a)(Object(I.a)({},e),{},{status:Oe[e.status]})}))}var Te=Object(u.a)((function(e){return{demoButton:{borderRadius:e.borderRadius,marginLeft:16},dismissButton:{borderRadius:e.borderRadius,textColor:"#ffff"},snackbar:{width:350,height:100},infoCardRoot:{minWidth:300,height:"78vh",marginLeft:16,marginRight:16,alignItems:"center",borderRadius:e.borderRadius},infoCardTitle:{fontWeight:"bold",fontSize:18,textAlign:"center"},infoCardText:{fontSize:14}}}));function Ce(e){var t=e.items,a=e.index,n=Te();if(-1!==a){var i=t[a],l=i.type,o=i.battery,c=i.status,s=i.latitude,d=i.longitude;return r.a.createElement(pe,{className:n.infoCardRoot},r.a.createElement(R.a,{className:n.infoCardTitle,gutterBottom:!0},"D\xe9tails de l'objet"),r.a.createElement(R.a,{className:n.infoCardText},"Cat\xe9gorie: ",l),r.a.createElement(R.a,{className:n.infoCardText},"Niveau de la batterie: ",o,"%"),r.a.createElement(R.a,{className:n.infoCardText},"Status: ",c),r.a.createElement(R.a,{className:n.infoCardText},"Position: (",s,", ",d,")"))}return r.a.createElement(pe,{className:n.infoCardRoot},r.a.createElement(R.a,{className:n.infoCardTitle,gutterBottom:!0},"Choisir un objet pour avoir plus d'information"))}function Se(){var e=Te(),t=Object(w.g)(),a=t.id,i=t.searchText,l=Object(n.useState)(-1),o=Object(y.a)(l,2),c=o[0],s=o[1],d=xe([{beaconId:"1",status:"available",battery:94,latitude:46.440896,longitude:6.891924,lastSeen:"2020-10-26T08:54:14",type:"Oxyg\xe8ne",service:"Bloc 1",id:1},{beaconId:"2",status:"available",battery:87,latitude:46.44092,longitude:6.891924,lastSeen:"2020-10-26T08:54:14",type:"Lit",service:"Bloc 1",id:2},{beaconId:"3",status:"available",battery:56,latitude:46.44089,longitude:6.891944,lastSeen:"2020-10-26T08:54:14",type:"ECG",service:"Bloc 1",id:3},{beaconId:"4",status:"needMaintenance",battery:20,latitude:46.44099,longitude:6.891984,lastSeen:"2020-10-26T08:54:14",type:"Oxyg\xe8ne",service:"Bloc 1",id:4},{beaconId:"5",status:"unavailable",battery:0,latitude:46.44079,longitude:6.891984,lastSeen:"2020-10-26T08:54:14",type:"ECG",service:"Bloc 2",id:5},{beaconId:"6",status:"available",battery:12,latitude:46.44089,longitude:6.891684,lastSeen:"2020-10-26T08:54:14",type:"Lit",service:"Bloc 2",id:6},{beaconId:"7",status:"available",battery:12,latitude:46.440898,longitude:6.892268,lastSeen:"2020-10-26T08:54:14",type:"Lit",service:"Bloc 2",id:7},{beaconId:"8",status:"needMaintenance",battery:20,latitude:46.441019,longitude:6.891783,lastSeen:"2020-10-26T08:54:14",type:"Lit",service:"Bloc 2",id:8},{beaconId:"9",status:"available",battery:73,latitude:46.440754,longitude:6.892197,lastSeen:"2020-10-26T08:54:14",type:"Lit",service:"Bloc 2",id:9}]),m=Object(n.useState)(d),u=Object(y.a)(m,2),b=u[0],g=u[1];Object(n.useEffect)((function(){if(a){var e=b.findIndex((function(e){return e.id===parseInt(a)}));s(e)}}),[a,b]);var f=Object(p.b)(),v=f.enqueueSnackbar,h=f.closeSnackbar;return r.a.createElement(ne.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center",wrap:"nowrap"},r.a.createElement(we,{items:b,searchText:i,onItemClick:s,defaultItemClickedId:a}),r.a.createElement(Ce,{items:b,index:c}),r.a.createElement(he,{items:b,index:c}),r.a.createElement(ae.a,{variant:"contained",className:e.demoButton,color:"primary",onClick:function(){var t=Object(te.a)(d);t[2]=Object(I.a)(Object(I.a)({},t[2]),{},{latitude:46.440711,longitude:6.891674}),g(t),s(2),v("Attention, l'ECG 3 est sorti par la porte 2!",{className:e.snackbar,variant:"warning",persist:!0,anchorOrigin:{vertical:"bottom",horizontal:"center"},action:function(t){return r.a.createElement(ae.a,{color:"inherit",className:e.dismissButton,onClick:function(){h(t)}},"Fermer")}})}},"D\xe9placer ECG avec id 3"))}var Be=a.p+"static/media/biot.c6be5078.png",ke=a.p+"static/media/healthcare.cd8fa3b6.png",De=Object(u.a)((function(e){return{root:{width:"100%",height:"78vh",display:"flex",marginBottom:e.spacing(1),alignSelf:"center",justifyContent:"center",alignItems:"center"}}}));function Ne(){var e=De();Object(s.d)("items",se).data;return r.a.createElement(ne.a,{className:e.root,container:!0,direction:"column",justify:"center",alignItems:"center",wrap:"nowrap"},r.a.createElement("img",{src:Be,alt:"BIoT",width:"350",height:"350"}),r.a.createElement("img",{src:ke,alt:"Healthcare",width:"660",height:"250"}))}var Le=a(855),Me=a(450),Ae=a(265),Pe=a(264),qe=a(72),Ge=a(205),Fe=a(175),We=Object(u.a)((function(e){return{card:{width:"50vw",height:"75vh",margin:e.spacing(1),borderRadius:e.borderRadius},cardTitle:{fontWeight:"bold",textAlign:"center"},formItem:{margin:e.spacing(1),minWidth:300},formButton:{height:e.spacing(6),margin:e.spacing(1),borderRadius:e.borderRadius}}}));function Ze(){var e=We(),t=Object(s.e)(),a=Object(p.b)().enqueueSnackbar,n=Object(s.c)((function(e){return function(e){return me.apply(this,arguments)}(e)}),{onSuccess:function(){t.invalidateQueries("items"),t.invalidateQueries("item")}}),i=Object(y.a)(n,1)[0];return r.a.createElement(ne.a,{container:!0,direction:"row",justify:"center",alignItems:"center",wrap:"nowrap"},r.a.createElement(pe,{className:e.card},r.a.createElement(R.a,{className:e.cardTitle,variant:"h6",gutterBottom:!0},"Ajouter un objet"),r.a.createElement(qe.c,{initialValues:{type:"Lit",service:"Bloc 1",beaconId:"",geoTracking:!1,maintenanceInterval:""},validationSchema:Fe.b({type:Fe.c().oneOf(["Lit","Oxygene","EDC"]).required("Required"),service:Fe.c().oneOf(["Bloc 1","Bloc 2","Bloc 3"]).required("Required"),beaconId:Fe.c().max(10,"Must be 10 characters or less").required("Required"),geoTracking:Fe.a().required("Required")}),onSubmit:function(){var e=Object(le.a)(ie.a.mark((function e(t){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({type:t.type,service:t.service,beaconId:t.beaconId});case 2:a("L'objet a \xe9t\xe9 ajout\xe9",{variant:"success",autoHideDuration:3e3,anchorOrigin:{vertical:"bottom",horizontal:"center"}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},(function(t){var a=t.submitForm,n=t.isSubmitting;return r.a.createElement(qe.b,null,r.a.createElement(ne.a,{container:!0,direction:"column",justify:"space-between",alignItems:"center",wrap:"nowrap"},r.a.createElement(Pe.a,{className:e.formItem},r.a.createElement(Ae.a,{htmlFor:"type",variant:"outlined"},"Cat\xe9gorie"),r.a.createElement(qe.a,{label:"Cat\xe9gorie",variant:"outlined",component:Ge.b,name:"type",inputProps:{id:"type"}},r.a.createElement(Me.a,{value:"Lit"},"Lit"),r.a.createElement(Me.a,{value:"Oxygene"},"Oxygene"),r.a.createElement(Me.a,{value:"EDC"},"EDC"))),r.a.createElement(Pe.a,{className:e.formItem},r.a.createElement(Ae.a,{htmlFor:"service",variant:"outlined"},"Service"),r.a.createElement(qe.a,{label:"Service",variant:"outlined",component:Ge.b,name:"service",inputProps:{id:"service"}},r.a.createElement(Me.a,{value:"Bloc 1"},"Bloc 1"),r.a.createElement(Me.a,{value:"Bloc 2"},"Bloc 2"),r.a.createElement(Me.a,{value:"Bloc 3"},"Bloc 3"))),r.a.createElement(qe.a,{className:e.formItem,component:Ge.c,label:"Id du beacon",name:"beaconId",variant:"outlined"}),r.a.createElement(qe.a,{component:Ge.a,type:"checkbox",name:"geoTracking",Label:{label:"G\xe9o-tracking"}}),n&&r.a.createElement(Le.a,null),r.a.createElement(ae.a,{className:e.formButton,variant:"contained",color:"primary",disabled:n,onClick:a},"Ajouter")))}))))}var ze=a(533);function He(){var e=Object(ze.usePosition)(!0),t=e.latitude,a=e.longitude,n=e.errorMessage;console.log(n),console.log(t),console.log(a);var i=Object(ge.e)({accessToken:"pk.eyJ1IjoiZ29uZG9sYXYiLCJhIjoiY2tnM2oxZWd4MGFqYTJ3bDZiZ2Zhcmt6ayJ9.wtTO9AblipI3G20FMELcxQ"});return r.a.createElement(i,{style:"mapbox://styles/gondolav/ckg3j2q4h1qg019k8sdyhkvvy",containerStyle:{width:"90vw",height:"80vh",margin:"auto"},center:[6.6323,46.5197]},r.a.createElement(ge.b,{type:"symbol",id:"marker",layout:{"icon-image":"hospital-15"}},r.a.createElement(ge.a,{coordinates:[6.6424,46.5249]})))}var Je=a(547),Ke=a.n(Je),Ye=a(534),Qe=a.n(Ye),Ue=a(34),Ve=Object(u.a)((function(e){return{table:{borderRadius:e.borderRadius,width:450,maxHeight:600,maxWidth:600,height:438,marginLeft:8,marginRight:8}}}));function Xe(e){var t=e.items,a=Ve(),n=Object(w.f)(),i=Object(x.a)(),l="D\xe9sol\xe9, aucun objet correspondant trouv\xe9";0===t.length&&(l="Tous les objets sont disponibles");var o={filterType:"checkbox",elevation:1,download:!1,print:!1,rowsPerPage:5,rowsPerPageOptions:[5,10,20],selectableRows:"none",selectableRowsHeader:!1,onRowClick:function(e,t){t.dataIndex,t.rowIndex;var a={id:e[0],type:e[1],service:e[2],battery:e[3],status:e[4],latitude:e[5],longitude:e[6]};n.push({pathname:"/items",id:a.id})},textLabels:J(l)};return r.a.createElement(b.a,{theme:Object(m.a)({overrides:{MUIDataTableToolbar:{titleText:{fontWeight:"bold",fontSize:i.maintenanceTitleTextSize}}}})},r.a.createElement(ye.a,{className:a.table,title:"Mat\xe9riel indisponible",data:t,columns:[{name:"id",label:"Id",options:{filter:!1,sort:!0}},{name:"type",label:"Cat\xe9gorie",options:{filter:!0,sort:!0}},{name:"service",label:"Service",options:{filter:!0,sort:!0}},{name:"battery",label:"Batterie",options:{filter:!1,sort:!0}},{name:"status",label:"Status",options:{filter:!0,sort:!0}},{name:"latitude",label:"Latitude",options:{filter:!1,sort:!0,display:!1}},{name:"longitude",label:"Longitude",options:{filter:!1,sort:!0,display:!1}}],options:o}))}var $e=a(285),_e=a(552),et=Object(u.a)((function(e){return{searchBar:{width:"90%",borderRadius:e.borderRadius,marginBottom:e.spacing(2),marginRight:e.spacing(.8)},addButton:{height:e.spacing(6),borderRadius:e.borderRadius,marginBottom:e.spacing(2),marginLeft:e.spacing(.8)},chartCard:{display:"flex",width:450,height:438,borderRadius:e.borderRadius,justifyContent:"center",alignItems:"center"},bottomFilterCard:{width:"100%",alignItems:"center",justifyContent:"center",display:"flex",borderRadius:e.borderRadius,marginBottom:16},formControl:{minWidth:300},bottomChartCard:{borderRadius:e.borderRadius,alignItems:"center",width:"100%",height:"auto"},bottomCard:{width:300,height:e.spacing(10),borderRadius:e.borderRadius,alignItems:"center"},cardTitle:{fontWeight:"bold",textAlign:"center",fontSize:e.maintenanceTitleTextSize},bottomCardText:{textAlign:"center"}}}));function tt(e){var t=e.data,a=e.title,n=et();return r.a.createElement(pe,{className:n.chartCard},r.a.createElement(R.a,{className:n.cardTitle,variant:"subtitle1"},a),r.a.createElement(Ue.h,{width:350,height:350,margin:{top:5,right:5,bottom:5,left:5}},r.a.createElement(Ue.g,{data:t,dataKey:"count",nameKey:"status",labelLine:!1,label:function(e){var t=e.cx,a=e.cy,n=e.midAngle,i=e.innerRadius,l=e.outerRadius,o=e.percent,c=Math.PI/180,s=i+.5*(l-i),d=t+s*Math.cos(-n*c),m=a+s*Math.sin(-n*c);return r.a.createElement("text",{x:d,y:m,fill:"white",textAnchor:d>t?"start":"end",dominantBaseline:"central"},"".concat((100*o).toFixed(0),"%"))},isAnimationActive:!1},t.map((function(e){return r.a.createElement(Ue.c,{fill:e.color})}))),r.a.createElement(Ue.j,{formatter:function(e,t,a){return[e,Oe[t]]}})))}function at(e){var t=e.data,a=e.title,n=Object(x.a)(),i=et();return r.a.createElement(pe,{className:i.chartCard},r.a.createElement(R.a,{className:i.cardTitle,variant:"subtitle1"},a),r.a.createElement(Ue.b,{width:350,height:350,data:t,layout:"vertical",margin:{top:8,right:16,bottom:8,left:0}},r.a.createElement(Ue.k,{type:"number",hide:!0,domain:[0,100]}),r.a.createElement(Ue.l,{type:"category",dataKey:"name",label:{value:"Service",angle:-90,position:"insideLeft",offset:10}}),r.a.createElement(Ue.j,{formatter:function(e,t,a){return["".concat(e,"%"),Oe[t]]}}),r.a.createElement(Ue.a,{dataKey:"available",fill:n.items.available,layout:"vertical",label:function(e){return"".concat(e.value,"%")},isAnimationActive:!1}),r.a.createElement(Ue.a,{dataKey:"unavailable",fill:n.items.unavailable,layout:"vertical",label:function(e){return"".concat(e.value,"%")},isAnimationActive:!1}),r.a.createElement(Ue.a,{dataKey:"needMaintenance",fill:n.palette.secondary.main,layout:"vertical",label:function(e){return"".concat(e.value,"%")},isAnimationActive:!1})))}function nt(e){var t=e.data,a=e.title,n=Object(x.a)(),i=et(),l={nbItemsDamaged:"Nombre d'objets endommag\xe9s",nbItemsRepaired:"Nombre d'objets r\xe9par\xe9s"};return r.a.createElement(pe,{className:i.bottomChartCard},r.a.createElement(R.a,{className:i.cardTitle,variant:"subtitle1"},a),r.a.createElement(Ue.i,{width:"100%",height:350},r.a.createElement(Ue.f,{data:t,margin:{left:0,right:20}},r.a.createElement(Ue.k,{dataKey:"date",label:{value:"Date",position:"insideBottomRight",offset:-10}}),r.a.createElement(Ue.l,{label:{value:"Nombre d'objets",angle:-90,position:"insideLeft",offset:10}}),r.a.createElement(Ue.j,{formatter:function(e,t,a){return[e,l[t]]}}),r.a.createElement(Ue.d,{formatter:function(e,t){var a=t.color;return r.a.createElement("span",{style:{color:a}},l[e])}}),r.a.createElement(Ue.e,{type:"monotone",dataKey:"nbItemsDamaged",stroke:n.items.unavailable}),r.a.createElement(Ue.e,{type:"monotone",dataKey:"nbItemsRepaired",stroke:n.items.available}))))}function rt(e){var t=e.title,a=e.value,n=e.color,i=e.style,l=et();return r.a.createElement(pe,{className:l.bottomCard,style:i},r.a.createElement(R.a,{className:l.cardTitle,variant:"subtitle1"},t),r.a.createElement(R.a,{className:l.bottomCardText,style:{color:n}},a))}function it(){var e=Object(x.a)(),t=et(),a=Object(w.f)(),i=Object(n.useState)("Tous"),l=Object(y.a)(i,2),o=l[0],c=l[1],s=Object(n.useState)({timeSeries:[{nbItemsDamaged:30,nbItemsRepaired:20,date:"18/10"},{nbItemsDamaged:20,nbItemsRepaired:40,date:"20/10"},{nbItemsDamaged:5,nbItemsRepaired:55,date:"24/10"},{nbItemsDamaged:7,nbItemsRepaired:53,date:"25/10"},{nbItemsDamaged:10,nbItemsRepaired:50,date:"27/10"},{nbItemsDamaged:12,nbItemsRepaired:48,date:"30/10"}],damaged:30,repaired:40,used:"90%",prediction:"Risque d'accumulation"}),m=Object(y.a)(s,2),u=m[0],b=m[1];Object(n.useEffect)((function(){switch(o){case"Tous":b({timeSeries:[{nbItemsDamaged:30,nbItemsRepaired:20,date:"18/10"},{nbItemsDamaged:20,nbItemsRepaired:40,date:"20/10"},{nbItemsDamaged:5,nbItemsRepaired:55,date:"24/10"},{nbItemsDamaged:7,nbItemsRepaired:53,date:"25/10"},{nbItemsDamaged:10,nbItemsRepaired:50,date:"27/10"},{nbItemsDamaged:12,nbItemsRepaired:48,date:"30/10"}],damaged:30,repaired:40,used:"90%",prediction:"Risque d'accumulation"});break;case"Lit":b({timeSeries:[{nbItemsDamaged:10,nbItemsRepaired:2,date:"18/10"},{nbItemsDamaged:2,nbItemsRepaired:5,date:"20/10"},{nbItemsDamaged:3,nbItemsRepaired:8,date:"24/10"},{nbItemsDamaged:7,nbItemsRepaired:1,date:"25/10"},{nbItemsDamaged:10,nbItemsRepaired:1,date:"27/10"},{nbItemsDamaged:12,nbItemsRepaired:3,date:"30/10"}],damaged:5,repaired:8,used:"95%",prediction:"Bonne operativit\xe9"});break;case"Oxyg\xe8ne":b({timeSeries:[{nbItemsDamaged:2,nbItemsRepaired:10,date:"18/10"},{nbItemsDamaged:5,nbItemsRepaired:2,date:"20/10"},{nbItemsDamaged:8,nbItemsRepaired:3,date:"24/10"},{nbItemsDamaged:7,nbItemsRepaired:1,date:"25/10"},{nbItemsDamaged:10,nbItemsRepaired:1,date:"27/10"},{nbItemsDamaged:12,nbItemsRepaired:3,date:"30/10"}],damaged:7,repaired:8,used:"89%",prediction:"Risque d'accumulation"});break;case"ECG":b({timeSeries:[{nbItemsDamaged:1,nbItemsRepaired:0,date:"18/10"},{nbItemsDamaged:2,nbItemsRepaired:0,date:"20/10"},{nbItemsDamaged:3,nbItemsRepaired:1,date:"24/10"},{nbItemsDamaged:2,nbItemsRepaired:2,date:"25/10"},{nbItemsDamaged:4,nbItemsRepaired:3,date:"27/10"},{nbItemsDamaged:1,nbItemsRepaired:4,date:"30/10"}],damaged:2,repaired:4,used:"92%",prediction:"Bonne operativit\xe9"})}}),[o]);var p=Object(n.useState)(""),g=Object(y.a)(p,2),f=g[0],v=g[1],h=[{beaconId:"1",status:"available",battery:94,latitude:46.5405405405405,longitude:6.60114696411765,lastSeen:"2020-10-26T08:54:14",type:"Oxyg\xe8ne",service:"Bloc 1",id:1},{beaconId:"2",status:"available",battery:87,latitude:46.5405405405405,longitude:6.60114696411765,lastSeen:"2020-10-26T08:54:14",type:"Lit",service:"Bloc 1",id:2},{beaconId:"3",status:"unavailable",battery:0,latitude:46.5405405405405,longitude:6.60114696411765,lastSeen:"2020-10-26T08:54:14",type:"ECG",service:"Bloc 1",id:3},{beaconId:"4",status:"needMaintenance",battery:20,latitude:46.5405405405405,longitude:6.60114696411765,lastSeen:"2020-10-26T08:54:14",type:"Oxyg\xe8ne",service:"Bloc 1",id:4},{beaconId:"5",status:"unavailable",battery:0,latitude:46.5405405405405,longitude:6.60114696411765,lastSeen:"2020-10-26T08:54:14",type:"ECG",service:"Bloc 2",id:5},{beaconId:"6",status:"available",battery:12,latitude:46.5405405405405,longitude:6.60114696411765,lastSeen:"2020-10-26T08:54:14",type:"Lit",service:"Bloc 2",id:6},{beaconId:"7",status:"available",battery:12,latitude:46.5405405405405,longitude:6.60114696411765,lastSeen:"2020-10-26T08:54:14",type:"Lit",service:"Bloc 2",id:7},{beaconId:"8",status:"needMaintenance",battery:20,latitude:46.5405405405405,longitude:6.60114696411765,lastSeen:"2020-10-26T08:54:14",type:"Lit",service:"Bloc 2",id:8},{beaconId:"9",status:"available",battery:73,latitude:46.5405405405405,longitude:6.60114696411765,lastSeen:"2020-10-26T08:54:14",type:"Lit",service:"Bloc 2",id:9}],E=xe(h),j=function(e,t){var a=Re.a.groupBy(e,(function(e){return e.status}));return Re.a.map(a,(function(e,a,n){var r;switch(a){case"available":r=t.items.available;break;case"unavailable":r=t.items.unavailable;break;default:r=t.palette.secondary.main}return{status:a,count:e.length,color:r}}))}(h,e),R=function(e){var t=Re.a.groupBy(e,(function(e){return e.service}));return Re.a.map(t,(function(e,t){var a=Re.a.map(e,(function(e){return e.status})),n=Re.a.countBy(a,(function(e){return e})),r=Re.a.sum(Re.a.map(n,(function(e){return e}))),i=Re.a.mapValues(n,(function(e){return e/r*100}));return Object(I.a)({name:t},i)}))}(h);return r.a.createElement(ne.a,{container:!0,direction:"column",justify:"space-between",alignItems:"center"},r.a.createElement(ne.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",wrap:"nowrap"},r.a.createElement(Qe.a,{placeholder:"Rechercher",className:t.searchBar,value:f,onChange:function(e){return v(e)},onRequestSearch:function(){if(f){a.push({pathname:"/items",searchText:f})}}}),r.a.createElement(ae.a,{variant:"contained",className:t.addButton,color:"primary",startIcon:r.a.createElement(Ke.a,null),component:d.b,to:"/items/add"},"Ajouter")),r.a.createElement(ne.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginBottom:16},wrap:"nowrap"},r.a.createElement(tt,{data:j,title:"\xc9tat du materiel"}),r.a.createElement(Xe,{items:E}),r.a.createElement(at,{data:R,title:"\xc9tat des services"})),r.a.createElement(pe,{className:t.bottomFilterCard},r.a.createElement(Pe.a,{className:t.formControl},r.a.createElement(Ae.a,{htmlFor:"bottom-filter",variant:"outlined"},"Cat\xe9gorie"),r.a.createElement($e.a,{variant:"outlined",label:"Cat\xe9gorie",labelId:"bottom-filter",name:"bottom-filter",id:"bottom-filter",inputProps:{name:"bottom-filter",id:"bottom-filter"},value:o,onChange:function(e){return c(e.target.value)}},r.a.createElement(Me.a,{value:"Tous"},"Tous"),r.a.createElement(Me.a,{value:"Lit"},"Lit"),r.a.createElement(Me.a,{value:"Oxyg\xe8ne"},"Oxyg\xe8ne"),r.a.createElement(Me.a,{value:"ECG"},"ECG")),r.a.createElement(_e.a,null,"Filtrer par cat\xe9gorie"))),r.a.createElement(nt,{data:u.timeSeries,title:"\xc9volution de la maintenance au cours du temps"}),r.a.createElement(ne.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{marginTop:16},wrap:"nowrap"},r.a.createElement(rt,{title:"Moyenne abim\xe9s par jour",value:u.damaged,style:{marginRight:8},color:e.items.unavailable}),r.a.createElement(rt,{title:"Moyenne r\xe9par\xe9s par jour",value:u.repaired,style:{marginLeft:8,marginRight:8},color:e.items.available}),r.a.createElement(rt,{title:"Mat\xe9riel utilis\xe9",value:u.used,style:{marginLeft:8,marginRight:8},color:e.items.available}),r.a.createElement(rt,{title:"Pr\xe9vision",value:u.prediction,style:{marginLeft:8},color:e.items.unavailable})))}var lt=Object(u.a)((function(e){return{root:{display:"flex",flexDirection:"column",minHeight:"100vh"},drawerHeader:Object(I.a)(Object(I.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:0},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:H},footer:{padding:e.spacing(3,2),marginTop:"auto",backgroundColor:"light"===e.palette.type?e.palette.grey[200]:e.palette.grey[800]}}}));function ot(){return r.a.createElement(R.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(O.a,{color:"inherit",href:"https://biot2.webflow.io"},"BIoT")," ",(new Date).getFullYear(),".")}function ct(){var e=lt(),t=Object(n.useState)(!1),a=Object(y.a)(t,2),i=a[0],l=a[1];return r.a.createElement("div",{className:e.root},r.a.createElement(ee,{isMenuDrawerOpen:i,onMenuButtonClick:function(){l(!0)}}),r.a.createElement(Q,{isOpen:i,handleDrawerClose:function(){l(!1)}}),r.a.createElement("main",{className:Object(j.default)(e.content,Object(E.a)({},e.contentShift,i))},r.a.createElement("div",{className:e.drawerHeader}),r.a.createElement(w.c,null,r.a.createElement(w.a,{path:"/maintenance"},r.a.createElement(it,null)),r.a.createElement(w.a,{path:"/items/add"},r.a.createElement(Ze,null)),r.a.createElement(w.a,{path:"/items"},r.a.createElement(Se,null)),r.a.createElement(w.a,{path:"/map"},r.a.createElement(He,null)),r.a.createElement(w.a,{path:"/"},r.a.createElement(Ne,null)))),r.a.createElement("footer",{className:e.footer},r.a.createElement(ot,null)))}var st=new s.a,dt=Object(m.a)({palette:{primary:f.a,secondary:h.a},items:{available:"#00c853",unavailable:"#d50000"},borderRadius:16,maintenanceTitleTextSize:18}),mt=Object(u.a)((function(e){return{snackbar:{borderRadius:e.borderRadius}}}));function ut(){var e=mt();return r.a.createElement(s.b,{queryCache:st},r.a.createElement(o.a,null),r.a.createElement(b.a,{theme:dt},r.a.createElement(p.a,{maxSnack:3,className:e.snackbar},r.a.createElement(d.a,null,r.a.createElement(ct,null)))),r.a.createElement(c.ReactQueryDevtools,{initialIsOpen:!0}))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ut,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[820,1,2]]]);
//# sourceMappingURL=main.f7fb76f0.chunk.js.map